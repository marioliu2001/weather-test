import{K as t,L as e,M as a,N as s,O as i,o as r,a as c,b as n,y as o,D as l,P as d,Q as u,S as m,T as p,z as g,u as v,x,U as y,V as h}from"./vendor-e9f0ad06.js";import{_ as b}from"./_plugin-vue_export-helper-1b428a4d.js";const f=t.create({
// baseURL: 'http://codercba.com:1888/api/',
// baseURL: ({}).VITE_BASE_URL,
timeout:1e4});f.interceptors.request.use((function(t){return t}),(function(t){return Promise.reject(t)})),f.interceptors.response.use((function(t){return t}),(function(t){if(t&&t.response){switch(t.response.status){case 400:t.message="请求错误";break;case 401:t.message="权限不足, 请重新登录";break;case 403:t.message="拒绝访问";break;case 404:t.message="请求地址出错";break;case 408:t.message="请求超时";break;case 500:t.message="服务器内部错误";break;case 501:t.message="服务未实现";break;case 502:t.message="网关错误";break;case 503:t.message="服务不可用";break;case 504:t.message="网关超时";break;case 505:t.message="HTTP 版本不受支持";break;default:t.message=`连接错误${t.response.status}`}}else JSON.stringify(t).includes("timeout")?t.message="服务器响应超时，请刷新当前页":t.message="连接服务器失败";return Promise.reject(t)}));const w=async(t,e={},a={})=>await(async(t,e,a,s={})=>{try{return(await f({method:t,url:e,["get"===t?"params":"data"]:a,...s})).data}catch(i){throw i}})("get",t,e,a),k=e("ipAddr",{state:()=>({ipAddr:"",location:{country:"",province:"",city:"",district:"",isp:""}}),actions:{
// 存储ip地址
async getIpAddr(){const t=await w("https://api.ipify.org?format=json");t&&(this.ipAddr=t.ip)},
// 获取地理位置
async getLocation(){const t=await(e=this.ipAddr,w("https://qifu-api.baidubce.com/ip/geo/v1/district",{ip:e}));var e;t&&(this.location.country=t.data.country,this.location.province=t.data.prov,this.location.city=t.data.city,this.location.district=t.data.district,this.location.isp=t.data.isp)}},persist:{enabled:!0,strategies:[{storage:sessionStorage}]}}),_={class:"right-text",style:{"margin-bottom":"10px","text-align":"center"}},A={class:"right-text",style:{"margin-bottom":"10px","text-align":"center"}},j={class:"right-text",style:{"margin-bottom":"10px","text-align":"center"}},q={class:"right-text",style:{"margin-bottom":"10px","text-align":"center"}},I={class:"card-header"},P={class:"right-text"},L={class:"text item"},S={class:"text item"},T={class:"text item"},N={class:"text item"},O={class:"text item"},z={class:"text item"},D={class:"text item"},H={class:"text item"},J={class:"text item"},K=b({__name:"index",setup(t){const e=k(),{ipAddr:b,location:f}=a(e),K=s(),M=s(),Q=s(),U=s(),V=s(),$=s([]),B=s([]),C=async()=>{const t=await w("/api/weather/city/101030100");K.value=t.data.wendu,M.value=t.data.shidu,Q.value=t.data.quality,U.value=t.data.ganmao,V.value=t.time,$.value=t.cityInfo.city,B.value=t.data.forecast};return i((async()=>{await C(),b.value||(await e.getIpAddr(),await e.getLocation())})),(t,e)=>{const a=y,s=p,i=h;return r(),c(u,null,[n(s,{title:"地理位置"},{default:o((()=>[n(a,{label:"ip"},{default:o((()=>[g(d(v(b)),1)])),_:1}),n(a,{label:"位置"},{default:o((()=>[g(d(v(f).province+" "+v(f).city+" "+v(f).district),1)])),_:1})])),_:1}),l("div",_," 温度："+d(K.value+"℃"),1),l("div",A,"湿度："+d(M.value),1),l("div",j," 空气质量："+d(Q.value),1),l("div",q," 更新时间："+d(V.value),1),(r(!0),c(u,null,m(B.value,((t,e)=>(r(),x(i,{class:"box-card",key:e},{header:o((()=>[l("div",I,[l("span",null,d($.value),1),l("span",P,d(t.ymd)+" "+d(t.week),1)])])),default:o((()=>[l("div",L,"天气："+d(t.type),1),l("div",S,"最高温度："+d(t.high),1),l("div",T,"最低温度："+d(t.low),1),l("div",N,"风速："+d(t.fx),1),l("div",O,"风向："+d(t.fl),1),l("div",z,"日出时间："+d(t.sunrise),1),l("div",D,"日落时间："+d(t.sunset),1),l("div",H,"空气指数："+d(t.aqi),1),l("div",J,"温馨提醒："+d(t.notice),1)])),_:2},1024)))),128))],64)}}},[["__scopeId","data-v-b8744ba5"]]);export{K as default};
